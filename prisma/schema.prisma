// File: prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Recipe {
  id             Int              @id @default(autoincrement())
  name           String           @unique
  productionRuns ProductionRun[]
}

model ProductionRun {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  dailyLot  String
  cakeLot   String
  icingLot  String
  recipeId  Int
  recipe    Recipe   @relation(fields: [recipeId], references: [id])
  pallets   Pallet[]
}

model Pallet {
  id              Int           @id @default(autoincrement())
  createdAt       DateTime      @default(now())
  productionRunId Int
  productionRun   ProductionRun @relation(fields: [productionRunId], references: [id], onDelete: Cascade)
}